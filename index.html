<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>lovestring - Local</title>
<style>
body { background:#0a0f1a; color:#e0e6ff; font-family:Poppins,sans-serif; margin:0; padding:10px;}
h1{text-align:center; color:#4ea1ff;}
.cardFlyer{background:#121b2c; border-radius:12px; padding:12px; margin-bottom:10px; box-shadow:0 2px 6px rgba(0,0,0,0.4);}
.cardFlyer img, .cardFlyer video, .cardFlyer audio{max-width:100%; border-radius:10px; margin-top:8px; cursor:pointer;}
button{background:#0044cc; color:white; border:none; border-radius:8px; padding:8px 12px; cursor:pointer;}
button:hover{background:#0059ff;}
.like-btn{cursor:pointer; color:#ff4d6d; font-weight:bold; margin-right:8px;}
#popup, #popupNum{display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.85); align-items:center; justify-content:center; z-index:100;}
.popup-content{background:#1a2438; border-radius:15px; padding:20px; text-align:center; max-width:320px;}
#publishArea{display:none; flex-direction:column; gap:8px; margin-bottom:15px; background:#11192a; padding:10px; border-radius:12px;}
input, textarea{width:100%; background:#0f1626; color:white; border:1px solid #2a3b57; border-radius:8px; padding:8px;}
#profilePic{display:block; margin:0 auto 10px; max-width:150px; border-radius:50%;}
.price {color:#10b981; font-weight:bold; margin-left:8px;}
</style>
</head>
<body>

<h1>ğŸ’‹ lovestring â¤ï¸â€ğŸ”¥</h1>
<img id="profilePic" src="https://raw.githubusercontent.com/Lfg237/images-Lesfacilitateurs-/f1dc4576c317909de024794c0b29d5adcab556cf/20250830_035314.jpg" alt="Photo de profil">
 ğŸ’agence de rencontre mixte 100% camerounaise  fiable mise en contact payante 100xaf inscription gratuite pour les filles 1000xaf pour les hommes plus dinformation contact l'admin Ã  whatsapp +237656523656 
<button onclick="window.open('https://lesfacilitateurs.vercel.app/index.html', '_blank')">Accueil</button>
<button onclick="window.open('https://whatsapp.com/channel/0029Vb7JQSvLo4hpgR6nvr2u', '_blank')">cathalogue chaine whatsapp</button>

<div id="adminCodeArea">
  <label>ğŸ” Code admin :</label>
  <input type="password" id="adminCodeInput" placeholder="Code admin...">
  <button onclick="checkAdminCode()">Valider</button>
</div>

<div id="publishArea">
  <textarea id="newPostText" placeholder="Ã‰crire un post..."></textarea>
  <input type="text" id="newMediaUrl" placeholder="URL image/vidÃ©o/audio">
  <input type="text" id="newLinkPayant" placeholder="Lien payant (optionnel)">
  <input type="text" id="newNumero" placeholder="NumÃ©ro payant (optionnel)">
  <input type="number" id="newNumeroPrice" placeholder="Prix numÃ©ro (FCFA)">
  <input type="number" id="newMediaPrice" placeholder="Prix mÃ©dia (FCFA)">
  <input type="number" id="newLinkPrice" placeholder="Prix lien (FCFA)">
  <button onclick="addPost()">Ajouter post</button>
</div>

<div id="postsContainer"></div>

<!-- Popup paiement -->
<div id="popup" class="popup">
  <div class="popup-content">
    <h3>ğŸ’° Paiement requis</h3>
    <p id="popupText"></p>
    <textarea id="transactionMsg" rows="4" placeholder="fais le dÃ©pÃ´t de 100 XAF et Colle ici ton message de transaction tu valide pour avoir le numÃ©ro"></textarea>
    <button onclick="validerPaiement()">âœ… Valider</button>
    <button onclick="fermerPopup()">âŒ Annuler</button>
  </div>
</div>

<!-- Popup numÃ©ro -->
<div id="popupNum" class="popup">
  <div class="popup-content">
    <h3>ğŸ“ Contenu dÃ©bloquÃ©</h3>
    <p id="popupNumText"></p>
    <button onclick="fermerPopupNum()">âŒ Fermer</button>
  </div>
</div>

<script>
let currentUser='User-'+crypto.randomUUID().slice(0,8);
let isAdmin=false;
let currentAction={type:'', index:null};

// Posts locaux avec prix et contenu payant
let posts=[



  {
    media_comment:"dalia yaounde tkc 24 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251120_183824773.jpg",
    numero_payant:"+237 6 72 83 39 80",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
{
    media_comment:"vannesssa 24 ans  YaoundÃ© ngousso",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251107_184040355.jpg",
    numero_payant:"+237 6 55 99 54 97",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },

 {
    media_comment:"gigolo club 25 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251026_164447806.jpg",
    numero_payant:"+37656523656",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"naomie douala pk14 24 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251021_073356356.jpg",
    numero_payant:"+237 6 57 51 88 96",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"celia douala bonamoussadi 23 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251021_073306990.jpg",
    numero_payant:"+237 6 82 45 93 87",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"ta perle rare ngaoundere 26 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251027_111350225.jpg",
    numero_payant:"+237 6 72 13 95 89",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"la grosse  Douala deido 25 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251026_090753025.jpg",
    numero_payant:"+237 6 96 87 21 35",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
 {
    media_comment:"luna  kribi ndoume 27 ans  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251107_140041186.jpg",
    numero_payant:"+237 6 51 80 94 83",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"aicha bafoussam 23 ans ne lui envoye pas l'argent d3 taxi ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/main/InShot_20251120_190237866.jpg",
    numero_payant:"+237 6 90 29 15 56",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
    {
    media_comment:"jessica lesbienne deido 21 ans ne lui envoye pas l'argent de taxi  ",
    media_url :"https://raw.githubusercontent.com/facilitateursgroupe-stack/lovestring237-photo-/92d192bc2f93ee862860686bcd04788a29aed7d8/InShot_20251021_073215323.jpg",
    numero_payant:"+237 6 78 38 54 23",
    link_payant:"",
    numero_price:100,
    media_price:0,
    link_price:0
  },
];

const postsContainer=document.getElementById('postsContainer');

function checkAdminCode(){
  const code=document.getElementById('adminCodeInput').value.trim();
  if(code==='233233'){
    isAdmin=true;
    alert("âœ… AccÃ¨s administrateur activÃ© !");
    document.getElementById('publishArea').style.display='flex';
    document.getElementById('adminCodeArea').style.display='none';
    renderPosts();
  } else alert("âŒ Code incorrect");
}

function addPost(){
  const text=document.getElementById('newPostText').value.trim();
  const media=document.getElementById('newMediaUrl').value.trim();
  const numero=document.getElementById('newNumero').value.trim();
  const link=document.getElementById('newLinkPayant').value.trim();
  const numeroPrice=parseInt(document.getElementById('newNumeroPrice').value)||0;
  const mediaPrice=parseInt(document.getElementById('newMediaPrice').value)||0;
  const linkPrice=parseInt(document.getElementById('newLinkPrice').value)||0;

  if(!text && !media && !numero && !link) return alert("Rien Ã  ajouter");

  posts.unshift({
    media_comment:text,
    media_url:media,
    numero_payant:numero,
    link_payant:link,
    numero_price:numeroPrice,
    media_price:mediaPrice,
    link_price:linkPrice
  });

  document.getElementById('newPostText').value="";
  document.getElementById('newMediaUrl').value="";
  document.getElementById('newNumero').value="";
  document.getElementById('newLinkPayant').value="";
  document.getElementById('newNumeroPrice').value="";
  document.getElementById('newMediaPrice').value="";
  document.getElementById('newLinkPrice').value="";

  renderPosts();
}

function renderPosts(){
  postsContainer.innerHTML="";
  posts.forEach((post,index)=>{
    let mediaHTML="";
    if(post.media_url){
      const ext=post.media_url.split('.').pop().toLowerCase();
      if(ext==='mp4') mediaHTML=`<video src="${post.media_url}" style="max-width:100%;" controls></video>`;
      else if(ext==='mp3'||ext==='wav') mediaHTML=`<audio src="${post.media_url}" style="width:100%;" controls></audio>`;
      else mediaHTML=`<img src="${post.media_url}" style="width:100%;">`;
    }

    let numeroHTML=post.numero_payant?`<span class="like-btn" onclick="demanderPaiement('numero',${index})">ğŸ“ Voir numÃ©ro (${post.numero_price} FCFA)</span>`:"";
    let linkHTML=post.link_payant?`<span class="like-btn" onclick="demanderPaiement('link',${index})">ğŸ”— Voir lien (${post.link_price} FCFA)</span>`:"";
    let mediaPayHTML=(post.media_price>0)?`<span class="like-btn" onclick="demanderPaiement('media',${index})">ğŸ¬ Contenu mÃ©dia (${post.media_price} FCFA)</span>`:"";

    const card=document.createElement('div');
    card.className="cardFlyer";
    card.innerHTML=`
      <b>Commentaire:</b> ${post.media_comment}<br>
      ${mediaHTML}
      <div style="margin-top:6px;">
        ${numeroHTML} ${linkHTML} ${mediaPayHTML}
        ${isAdmin?`<button onclick="modifierPost(${index})">âœï¸ Modifier</button>`:""}
        ${isAdmin?`<button onclick="deletePost(${index})">ğŸ—‘ï¸ Supprimer</button>`:""}
      </div>
    `;
    postsContainer.appendChild(card);
  });
}

function deletePost(index){ posts.splice(index,1); renderPosts(); }

function modifierPost(index){
  const post=posts[index];
  const text=prompt("Modifier le commentaire:",post.media_comment);
  const media=prompt("Modifier le mÃ©dia URL:",post.media_url);
  const numero=prompt("Modifier le numÃ©ro:",post.numero_payant);
  const link=prompt("Modifier le lien:",post.link_payant);
  const numeroPrice=parseInt(prompt("Modifier prix numÃ©ro:",post.numero_price))||0;
  const mediaPrice=parseInt(prompt("Modifier prix mÃ©dia:",post.media_price))||0;
  const linkPrice=parseInt(prompt("Modifier prix lien:",post.link_price))||0;

  posts[index]={media_comment:text, media_url:media, numero_payant:numero, link_payant:link, numero_price:numeroPrice, media_price:mediaPrice, link_price:linkPrice};
  renderPosts();
}

function demanderPaiement(type,index){
  currentAction={type,index};
  const post=posts[index];
  const beneficiaries=[
    {name:"Michel kono", numero:"651475255"},
    {name:"Michel kono", numero:"656050097"}
  ];
  let price=0;
  if(type==='numero') price=post.numero_price;
  else if(type==='media') price=post.media_price;
  else if(type==='link') price=post.link_price;

  let text=`ğŸ’° Paiement requis\nPrix: ${price} FCFA\nBÃ©nÃ©ficiaires:\n`;
  beneficiaries.forEach(b=> text+=`â€¢ ${b.name} : ${b.numero}\n`);

  document.getElementById('popupText').innerText=text;
  document.getElementById('transactionMsg').value="";
  document.getElementById('popup').style.display="flex";
}

function validerPaiement() {
  const msg = document.getElementById('transactionMsg').value.trim().toLowerCase();
  if (!msg) return alert("âš ï¸ Message de transaction requis");

  // --- ADMIN BYPASS ---
  if (msg === "233233") {
    showNumeroPopup(posts[currentAction.index], currentAction.type);
    fermerPopup();
    return;
  }

  // --- EXTRACTION ID ---
  const idMatch = msg.match(/id\s*[:\-]?\s*([a-z0-9\-]+)/i);
  if (!idMatch) return alert("âŒ ID de transaction manquant");

  const transactionId = idMatch[1];

  // --- ANTI DOUBLON ---
  if (usedTransactionIds.has(transactionId)) {
    return alert("âŒ Cet ID de transaction a dÃ©jÃ  Ã©tÃ© utilisÃ©");
  }

  // --- VALIDATION BÃ‰NÃ‰FICIAIRE ---
  let beneficiaryValid = false;

  beneficiaries.forEach(b => {
    if (msg.includes(b.name) && msg.includes(b.numero)) {
      beneficiaryValid = true;
    }
  });

  if (!beneficiaryValid) {
    return alert("âŒ BÃ©nÃ©ficiaire ou numÃ©ro invalide");
  }

  // --- SUCCÃˆS ---
  usedTransactionIds.add(transactionId);
  alert("âœ… Paiement validÃ© avec succÃ¨s");

  showNumeroPopup(posts[currentAction.index], currentAction.type);
  fermerPopup();
}



renderPosts();
</script>
</body>
</html>